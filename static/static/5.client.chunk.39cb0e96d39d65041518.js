webpackJsonp([5],{549:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{persistentStore:e.persistentStore.toJS(),userInfo:e.clientGeneral.userInfo.toJS()}}function s(e){return{persistentActions:(0,k.bindActionCreators)(T,e),actions:(0,k.bindActionCreators)(w,e)}}Object.defineProperty(t,"__esModule",{value:!0});var f=(n(27),n(24)),c=o(f),d=(n(26),n(23)),p=o(d),y=(n(169),n(168)),m=o(y),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=n(1),E=o(b),v=n(33),_=n(22),k=n(18),g=n(96),w=r(g),L=n(95),T=r(L),S=m.default.SubMenu,P=function(e){function t(){return l(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,[{key:"componentWillMount",value:function(){var e=this.props.persistentStore.userId;this.props.actions.loadMyInfo(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.persistentStore.userId,n=this.props.userInfo;t!=n.userId}},{key:"render",value:function(){var e=this.props.location.pathname.replace("/client/","");"topics/topic"===e&&(e="topics/list");var t=this.props.persistentStore.userId,n=this.props.userInfo;return E.default.createElement(c.default,{style:{height:window.innerHeight}},E.default.createElement(p.default,{span:4,className:"full-height",style:{background:"#404040"}},E.default.createElement("h1",{className:"text-center fc-white",style:{height:"80px",lineHeight:"80px"}},n.userName),E.default.createElement(m.default,{theme:"dark",style:{width:"100%"},defaultOpenKeys:["topics","blog","profile"],selectedKeys:[e],mode:"inline"},E.default.createElement(m.default.Item,{key:"feed"},E.default.createElement(v.Link,{to:"/client/feed"},"News Feed")),E.default.createElement(S,{key:"topics",title:"Topics"},E.default.createElement(m.default.Item,{key:"profile/subscribe"},E.default.createElement(v.Link,{to:{pathname:"/client/profile/subscribe",query:{uid:t}}},"My Topics")),E.default.createElement(m.default.Item,{key:"topics/list"},E.default.createElement(v.Link,{to:"/client/topics/list"},"More Topics"))),E.default.createElement(S,{key:"blog",title:"Blog"},E.default.createElement(m.default.Item,{key:"profile/posts"},E.default.createElement(v.Link,{to:{pathname:"/client/profile/posts",query:{uid:t}}},"My Posts")),E.default.createElement(m.default.Item,{key:"blog/edit"},E.default.createElement(v.Link,{to:{pathname:"/client/blog/edit",query:{eid:-1}}},"Create Blog"))),E.default.createElement(S,{key:"profile",title:"Profile"},E.default.createElement(m.default.Item,{key:"profile/info"},E.default.createElement(v.Link,{to:{pathname:"/client/profile/info",query:{uid:t}}},"My Profile")),E.default.createElement(m.default.Item,{key:"profile/follow"},E.default.createElement(v.Link,{to:{pathname:"/client/profile/follow",query:{uid:t}}},"My Follows"))))),E.default.createElement(p.default,{span:20,className:"full-height"},this.props.children))}}]),t}(b.Component);P.propTypes={children:E.default.PropTypes.oneOfType([E.default.PropTypes.string,E.default.PropTypes.element]),location:E.default.PropTypes.object,userInfo:E.default.PropTypes.object,persistentStore:E.default.PropTypes.object,persistentActions:E.default.PropTypes.object,actions:E.default.PropTypes.object},t.default=(0,_.connect)(a,s)(P)},550:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];return d[t.type]?d[t.type](e,t):e}Object.defineProperty(t,"__esModule",{value:!0});var i,u=n(18),a=n(41),s=r(a),f=n(34),c=s.default.fromJS({userName:"",sex:"Male",birth:1478236926748,email:"",followerNum:12,userId:0}),d=(i={},o(i,f.CLIENT_USER.LOAD,function(e,t){return e.merge(s.default.Map({userName:t.result.name,sex:t.result.sex?"Male":"Female",birth:t.result.birth,email:t.result.email,followerNum:t.result.follows,userId:t.result.uid}))}),o(i,f.CLIENT_USER.UPDATE,function(e,t){return e}),i);t.default=(0,u.combineReducers)({userInfo:l})},559:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return{type:s.CLIENT_FEEDS.RESET_FEEDS}}function l(e,t,n,r){return function(o,l){return(0,a.default)((0,c.default)("feeds:loadFeeds",e,t,n,r)).then(function(e){return e.json()}).catch(function(){return{status:"fail",result:{msg:"Network Unavailable!"}}}).then(function(l){return"fail"===l.status?void p.default.error((0,c.default)("feeds:loadFeeds",e,t,n,r),l.result.msg):void o({type:s.CLIENT_FEEDS.LOAD_FEEDS,result:l.result})})}}function i(e,t){return function(n,r){return(0,a.default)((0,c.default)("feeds:loadAds",e,t)).then(function(e){return e.json()}).catch(function(){return{status:"fail",result:{msg:"Network Unavailable!"}}}).then(function(r){return"fail"===r.status?void p.default.error((0,c.default)("feeds:loadAds",e,t),r.result.msg):void n({type:s.CLIENT_FEEDS.LOAD_ADS,result:r.result})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetFeeds=o,t.loadFeeds=l,t.loadAds=i;var u=n(80),a=r(u),s=n(34),f=n(79),c=r(f),d=n(66),p=r(d)},560:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{persistentStore:e.persistentStore.toJS(),store:e.clientFeeds.toJS()}}function s(e){return{globalActions:(0,y.bindActionCreators)(h,e),actions:(0,y.bindActionCreators)(E,e)}}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=o(c),p=(n(33),n(22)),y=n(18),m=n(96),h=r(m),b=n(559),E=r(b),v=n(174),_=function(e){function t(e){l(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.switchLike=n.switchLike.bind(n),n}return u(t,e),f(t,[{key:"componentWillMount",value:function(){var e=this.props.persistentStore.userId;this.props.actions.resetFeeds(),this.props.actions.loadFeeds(e,0,20,this.props.store.timestamp),this.props.actions.loadAds(e,2)}},{key:"switchLike",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"like",n=this.props.persistentStore.userId;this.props.globalActions.switchLike(n,e,t)}},{key:"render",value:function(){var e=this,t=this.props.store,n=t.feedsList,r=t.adsList;return d.default.createElement("div",{className:"full-height"},d.default.createElement("div",{className:"fix-top-row-wrapper",style:{paddingTop:"80px"}},d.default.createElement("div",{className:"fix-top-row",style:{height:"80px"}},d.default.createElement("div",null,d.default.createElement("h1",{className:"fc-white fs30",style:{paddingLeft:"5%",lineHeight:"80px",background:"#0272A2"}},"Feeds"))),d.default.createElement("div",{className:"full-height",style:{background:"#ECECEC",overflow:"auto"}},(n||[]).map(function(t,n){return d.default.createElement("div",{key:""+t.eid},n<3||n%3!==0||0===r.length?null:d.default.createElement(v.AdCard,{event:r.pop()}),"blog"===t.event_type?d.default.createElement(v.BlogCard,{event:t,onLike:e.switchLike.bind(null,t.eid,"like"),onCancelLike:e.switchLike.bind(null,t.eid,"cancel_like")}):d.default.createElement(v.ImgCard,{event:t,onLike:e.switchLike.bind(null,t.eid,"like"),onCancelLike:e.switchLike.bind(null,t.eid,"cancel_like")}))}))))}}]),t}(c.Component);_.propTypes={children:d.default.PropTypes.oneOfType([d.default.PropTypes.string,d.default.PropTypes.element]),location:d.default.PropTypes.object,store:d.default.PropTypes.object,persistentStore:d.default.PropTypes.object,globalActions:d.default.PropTypes.object,actions:d.default.PropTypes.object},t.default=(0,p.connect)(a,s)(_)},561:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1];return c[t.type]?c[t.type](e,t):e}Object.defineProperty(t,"__esModule",{value:!0});var i,u=n(41),a=r(u),s=n(34),f=a.default.fromJS({timestamp:Date.now(),feedsList:[],adsList:[]}),c=(i={},o(i,s.CLIENT_FEEDS.LOAD_FEEDS,function(e,t){return e.update("feedsList",function(e){return e.concat(a.default.fromJS(t.result))})}),o(i,s.CLIENT_FEEDS.LOAD_ADS,function(e,t){return e.update("adsList",function(e){return e.concat(a.default.fromJS(t.result))})}),o(i,s.CLIENT_FEEDS.RESET_FEEDS,function(e,t){return e.merge(f)}),o(i,s.CLIENT_EVENTS.SWITCH_LIKE,function(e,t){var n=e.get("feedsList").findIndex(function(e){return e.get("eid")===t.eid});return n<0?e:e.update("feedsList",function(e){return e.update(n,function(e){return e.merge(a.default.fromJS({islike:t.isLike,likes:e.get("likes")+(t.isLike?1:-1)}))})})}),i);t.default=l}});
//# sourceMappingURL=5.client.chunk.39cb0e96d39d65041518.js.map