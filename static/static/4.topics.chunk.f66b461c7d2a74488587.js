webpackJsonp([4],{122:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(t,n){return Promise.all([(0,a.default)((0,d.default)("topics:getAllTopics")).then(function(e){return e.json()}),(0,a.default)((0,d.default)("topics:getTopicsOfUser",e)).then(function(e){return e.json()})]).catch(function(){return[{status:"fail",result:{msg:"Network Unavailable!"}},null]}).then(function(e){var n=l(e,2),r=n[0],o=n[1];if("fail"===r.status)return void y.default.error((0,d.default)("topics:getAllTopics"),r.result.msg);if("fail"===o.status)return void y.default.error((0,d.default)("topics:getTopicsOfUser"),o.result.msg);var i=new Set(o.result.map(function(e){return e.topic_name}));t({type:f.CLIENT_TOPICS.LOAD_TOPIC_LIST,result:r.result.sort(function(e,t){return t.count-e.count}).map(function(e){return s({},e,{isSubscribed:i.has(e.topic_name)})})})})}}function i(e){return function(t,n){return(0,a.default)((0,d.default)("topics:getTopicsOfUser",e)).then(function(e){return e.json()}).catch(function(){return{status:"fail",result:{msg:"Network Unavailable!"}}}).then(function(n){return"fail"===n.status?void y.default.error((0,d.default)("topics:getTopicsOfUser",e),n.result.msg):void t({type:f.CLIENT_TOPICS.LOAD_USER_TOPICS,status:n.status,result:n.result})})}}function u(e,t){return function(n,r){return(0,a.default)((0,d.default)("topics:getAllEventsOfTopic",e,t)).then(function(e){return e.json()}).catch(function(){return{status:"fail",result:{msg:"Network Unavailable!"}}}).then(function(r){return"fail"===r.status?void y.default.error((0,d.default)("topics:getAllEventsOfTopic",e,t),r.result.msg):void n({type:f.CLIENT_TOPICS.LOAD_EVENT_LIST,status:r.status,result:{topic:e,eventsList:r.result.sort(function(e,t){return t.likes-e.likes})}})})}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.loadAllTopics=o,t.getTopicsOfUser=i,t.loadAllEventsOfTopics=u;var c=n(62),a=r(c),f=n(30),p=n(61),d=r(p),b=n(56),y=r(b)},585:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),a=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"render",value:function(){var e=this.props.location.query;return c.default.createElement("div",{className:"full-height"},c.default.createElement("div",{className:"fix-top-row-wrapper",style:{paddingTop:"80px"}},c.default.createElement("div",{className:"fix-top-row",style:{height:"80px",background:"#0272A2"}},c.default.createElement("h1",{className:"fc-white capitalize",style:{fontSize:"30px",lineHeight:"80px",marginLeft:"5%"}},"Topics"+(e.topic?" - "+e.topic:""))),c.default.createElement("div",{className:"full-height"},this.props.children)))}}]),t}(l.Component);a.propTypes={location:c.default.PropTypes.object,children:c.default.PropTypes.oneOfType([c.default.PropTypes.string,c.default.PropTypes.element])},t.default=a},586:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];return f[t.type]?f[t.type](e,t):e}Object.defineProperty(t,"__esModule",{value:!0});var u;t.default=i;var s=n(42),l=r(s),c=n(30),a=l.default.fromJS({topicsList:[],eventsList:{}}),f=(u={},o(u,c.CLIENT_TOPICS.LOAD_TOPIC_LIST,function(e,t){return e.set("topicsList",l.default.fromJS(t.result))}),o(u,c.CLIENT_TOPICS.LOAD_EVENT_LIST,function(e,t){return e.update("eventsList",function(e){return e.set(t.result.topic,l.default.fromJS(t.result.eventsList))})}),o(u,c.CLIENT_TOPICS.SWITCH_SUBSCRIBE,function(e,t){var n=e.get("topicsList").findIndex(function(e){return e.get("topic_name")===t.topic});return n<0?e:e.update("topicsList",function(e){return e.update(n,function(e){return e.merge(l.default.fromJS({isSubscribed:t.isSubscribed}))})})}),o(u,c.CLIENT_EVENTS.SWITCH_LIKE,function(e,t){return e.update("eventsList",function(e){return e.map(function(e){var n=e.findIndex(function(e){return e.get("eid")===t.eid});return n<0?e:e.update(n,function(e){return e.merge(l.default.fromJS({islike:t.isLike,likes:e.get("likes")+(t.isLike?1:-1)}))})})})}),u)},588:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{persistentStore:e.persistentStore.toJS(),topicsStore:e.clientTopics.toJS()}}function c(e){return{globalActions:(0,O.bindActionCreators)(E,e),actions:(0,O.bindActionCreators)(P,e)}}Object.defineProperty(t,"__esModule",{value:!0});var a=(n(38),n(33)),f=o(a),p=(n(37),n(31)),d=o(p),b=(n(46),n(45)),y=o(b),h=(n(44),n(40)),v=o(h),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=n(1),S=o(_),T=n(29),g=n(23),O=n(18),w=n(73),E=r(w),k=n(122),P=r(k),j=function(e){function t(e){i(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.switchSubscribeStatus=n.switchSubscribeStatus.bind(n),n}return s(t,e),m(t,[{key:"componentWillMount",value:function(){this.props.actions.loadAllTopics(this.props.persistentStore.userId)}},{key:"switchSubscribeStatus",value:function(e,t){var n=this.props.persistentStore.userId;t?this.props.globalActions.switchSubscribe(n,e,"cancel subscribe"):this.props.globalActions.switchSubscribe(n,e,"subscribe")}},{key:"render",value:function(){var e=this,t=this.props.topicsStore,n=0===parseInt(this.props.persistentStore.userId);return S.default.createElement("div",{className:"full-height",style:{background:"#ECECEC",padding:"5%",overflow:"auto"}},S.default.createElement(f.default,null,t.topicsList.map(function(t){return S.default.createElement(d.default,{key:t.topic_name,span:12,style:{height:"200px"}},S.default.createElement(y.default,{title:S.default.createElement("h3",{className:"capitalize"},S.default.createElement(T.Link,{to:{pathname:"/client/topics/topic",query:{topic:t.topic_name}}},t.topic_name)),bordered:!0,extra:S.default.createElement("div",null,n?null:S.default.createElement(v.default,{type:t.isSubscribed?"primary":"default",size:"small",style:{width:"80px"},onClick:e.switchSubscribeStatus.bind(null,t.topic_name,t.isSubscribed)},t.isSubscribed?"Cancel":"Subscribe")),style:{width:"90%"}},S.default.createElement("p",null,t.description)))})))}}]),t}(_.Component);j.propTypes={location:S.default.PropTypes.object,topicsStore:S.default.PropTypes.object,persistentStore:S.default.PropTypes.object,globalActions:S.default.PropTypes.object,actions:S.default.PropTypes.object},t.default=(0,g.connect)(l,c)(j)},590:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{persistentStore:e.persistentStore.toJS(),topicsStore:e.clientTopics.toJS()}}function c(e){return{actions:(0,b.bindActionCreators)(h,e),globalActions:(0,b.bindActionCreators)(m,e)}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=o(f),d=n(23),b=n(18),y=n(122),h=r(y),v=n(73),m=r(v),_=n(160),S=function(e){function t(e){i(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.switchLike=n.switchLike.bind(n),n}return s(t,e),a(t,[{key:"componentWillMount",value:function(){var e=this.props.location.query;this.props.topicsStore.eventsList[e.topic]||this.props.actions.loadAllEventsOfTopics(e.topic,this.props.persistentStore.userId)}},{key:"switchLike",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"like",n=this.props.persistentStore.userId;n>0&&this.props.globalActions.switchLike(n,e,t)}},{key:"render",value:function(){var e=this,t=this.props.topicsStore,n=this.props.location.query.topic||"";return p.default.createElement("div",{className:"full-height",style:{background:"#ECECEC",overflow:"auto"}},(t.eventsList[n]||[]).map(function(t){return"blog"===t.event_type?p.default.createElement(_.BlogCard,{key:""+t.eid,event:t,onLike:e.switchLike.bind(null,t.eid,"like"),onCancelLike:e.switchLike.bind(null,t.eid,"cancel_like")}):p.default.createElement(_.ImgCard,{key:""+t.eid,event:t,onLike:e.switchLike.bind(null,t.eid,"like"),onCancelLike:e.switchLike.bind(null,t.eid,"cancel_like")})}))}}]),t}(f.Component);S.propTypes={location:p.default.PropTypes.object,topicsStore:p.default.PropTypes.object,persistentStore:p.default.PropTypes.object,persistentActions:p.default.PropTypes.object,globalActions:p.default.PropTypes.object,actions:p.default.PropTypes.object},t.default=(0,d.connect)(l,c)(S)}});
//# sourceMappingURL=4.topics.chunk.f66b461c7d2a74488587.js.map